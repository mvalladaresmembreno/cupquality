{% extends 'base.html' %}
{% load static %}
{% load utilidades %}
{% block head_css %}
<link rel="stylesheet" href="{% static '/css/stats.css' %}">
<link rel="stylesheet" href="{% static '/css/orden.css' %}">
{% endblock %}

{% block javascript %}
<script src="{% static 'scripts/list.min.js' %}"></script>
<script src="{% static '/scripts/home/perfilMuestra.js' %}"></script>
{% endblock %}

{% block title %}
    : Perfil de Muestras
{% endblock %}

{% block main %}
<div class="container h-auto my-auto mb-5 w-100">
    <div class="d-inline-flex p-2 py-3">
        <h3>Perfil de Muestras</h3>
    </div>
    <div class="d-flex flex-row mb-3 justify-content-evenly flex-wrap w-100">
        {% if request.user|has_group:"Administrador" %}
        <div class="p-2">
            <select class="select" id="org" name="org">
                <option value="" default>Organizacion</option>
                {% for g in organizaciones %}
                <option value="{{g.id_org}}">{{g.name_org}}</option>
                {% endfor %}
            </select>
        </div>
        {% endif %}
        <div class="p-2">
            <select class="select" id="genero">
                <option value="" default>Genero</option>
                <option value="M">Masculino</option>
                <option value="F">Femenino</option>
            </select>
        </div>
        <div class="p-2">
            <select class="select" id="dpto">
                <option value="" default>Departamentos</option>
                {% for d in departamentos %}
                <option value="{{d.idDpto}}">{{d.nameDpto}}</option>
                {% endfor %}
                
            </select>
        </div>
        <div class="p-2">
            <select class="select" id="mun" name="mun">
                <option value="" default>Municipios</option>
            </select>
        </div>
        <div class="p-2">
            <select class="select" multiple id="certs" name="certs">
                {% for c in certificaciones %}
                <option value="{{c.id}}">{{c.nameCert}}</option>
                {% endfor %}
              </select>
              <label class="form-label select-label">Certificaciones</label>
        </div>
        <div class="p-2">
            <select class="select" multiple id="sabores" name="sabores">
                {% for s in sabores %}
                <option value="{{s.idSabor}}">{{s.nameSabor}}</option>
                {% endfor %}
              </select>
              <label class="form-label select-label">Sabores</label>
        </div>
        <div class="p-2">
            <select class="select" name="procesos" id="procesos">
                <option value="" default>Procesado</option>
                {% for p in procesos %}
                <option value="{{p.0}}">{{p.1}}</option>
                {% endfor %}
            </select>
        </div>
        <div class="p-2">
            <button type="button" class="btn btn-warning" id="btnFiltrar">Aplicar</button>
        </div>
    </div>
    <div class="d-flex flex-row mb-3 py-3 justify-content-evenly flex-wrap ">
        <div id="muestras" class="table-responsive">
            <table class="table table-striped table-hover text-center ">
                <thead class="table-dark">
                  <tr>
                    <th scope="col" class="sort" data-sort="muestra">Muestra</th>
                    <th scope="col" class="sort" data-sort="rechazo">Rechazo</th>
                    <th scope="col" class="sort" data-sort="conciliado">Conciliación</th>
                    <th scope="col" class="sort" data-sort="aEfectuado">Análisis Efectuado</th>
                    <th scope="col" class="sort" data-sort="genero">Genero</th>
                    <th scope="col" class="sort" data-sort="DTI">Defectos Tipo I</th>
                    <th scope="col" class="sort" data-sort="DTII">Defectos Tipo II</th>
                    <th scope="col" class="sort" data-sort="aroma">Aromas</th>
                    <th scope="col" class="sort" data-sort="sabor">Sabor</th>
                    <th scope="col" class="sort" data-sort="pf">Puntaje Final</th>
                  </tr>
                </thead>
                <tbody class="list" id="listaMuestra">
                  <tr>
                    <td colspan="10">Aún no hay datos para mostrar</td>
                  </tr>
                </tbody>
              </table>
        </div>

    </div>
    
    <div class="d-flex flex-row justify-content-end">
        <div class="p-2">
            <button type="button" class="btn btn-dark" id="btndsc">
                <i class="fas fa-file-download"></i>
            </button>
        </div>
    </div>

    <i class=""></i>
</div>
{% endblock %}